<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.97.3" />
<link rel="canonical" type="text/html" href="/v0.1/overview/">
<link rel="alternate" type="application/rss&#43;xml" href="/v0.1/overview/index.xml">
<meta name="robots" content="noindex, nofollow">


<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">

<title>Overview | Omni</title>
<meta name="description" content="">
<meta property="og:title" content="Overview" />
<meta property="og:description" content="" />
<meta property="og:type" content="website" />
<meta property="og:url" content="/v0.1/overview/" />

<meta itemprop="name" content="Overview">
<meta itemprop="description" content=""><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Overview"/>
<meta name="twitter:description" content=""/>




<link rel="preload" href="/scss/main.min.0ef68169fe3e3f67b5cf6bc5f00f55fa4cd0402d35e7d812ee541930f94707e6.css" as="style">
<link href="/scss/main.min.0ef68169fe3e3f67b5cf6bc5f00f55fa4cd0402d35e7d812ee541930f94707e6.css" rel="stylesheet" integrity="">

<script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3"/>
<link rel="stylesheet" type="text/css" href="/asciinema/asciinema-player.css" />






  
  
  
    
    
  


<script async src="https://www.googletagmanager.com/gtag/js?id=G-SFLNPVQLRL"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-SFLNPVQLRL', { 'anonymize_ip': false });
}
</script>

  </head>
  <body class="td-section">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
        <a class="navbar-brand" href="/">
		<span class="navbar-logo"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 203.74 226.05"><defs><style>.cls-1{fill:url(#linear-gradient)}.cls-2{fill:url(#linear-gradient-2)}.cls-3{fill:url(#linear-gradient-3)}.cls-4{fill:url(#linear-gradient-4)}.cls-5{fill:url(#linear-gradient-5)}</style><linearGradient id="linear-gradient" x1="101.85" y1="-12.91" x2="101.85" y2="224.04" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#ffd200"/><stop offset=".08" stop-color="#ffb500"/><stop offset=".2" stop-color="#ff8c00"/><stop offset=".3" stop-color="#ff7300"/><stop offset=".36" stop-color="#ff6a00"/><stop offset=".48" stop-color="#fc4f0e"/><stop offset=".65" stop-color="#f92f1e"/><stop offset=".79" stop-color="#f81b27"/><stop offset=".89" stop-color="#f7142b"/><stop offset="1" stop-color="#df162e"/></linearGradient><linearGradient id="linear-gradient-2" x1="24.84" y1="-12.91" x2="24.84" y2="224.04" xlink:href="#linear-gradient"/><linearGradient id="linear-gradient-3" x1="178.9" y1="-12.91" x2="178.9" y2="224.04" xlink:href="#linear-gradient"/><linearGradient id="linear-gradient-4" x1="145.06" y1="-12.91" x2="145.06" y2="224.04" xlink:href="#linear-gradient"/><linearGradient id="linear-gradient-5" x1="58.64" y1="-12.91" x2="58.64" y2="224.04" xlink:href="#linear-gradient"/></defs><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><path class="cls-1" d="M101.89 226.05c2.85.0 5.67-.15 8.46-.35V.35c-2.8-.21-5.62-.35-8.48-.35s-5.7.14-8.52.35V225.69c2.81.21 5.64.35 8.5.36z"/><path class="cls-2" d="M11.56 50.9 9.12 48.47A112.82 112.82.0 00.2 63.61c29.42 29.89 32.52 44.31 32.48 49.14C32.57 125 17.58 144.21.0 162a113.69 113.69.0 008.84 15.15c1-1 1.95-1.92 2.92-2.9 25.37-25.54 37.77-45.61 37.92-61.38S37.36 77 11.56 50.9z"/><path class="cls-3" d="M192 174.29l2.92 2.9A113.69 113.69.0 00203.74 162c-17.57-17.83-32.56-37.09-32.68-49.29-.11-11.9 14.79-31.15 32.46-49.18a112.88 112.88.0 00-8.9-15.1l-2.44 2.43c-25.8 26.05-38.27 46.34-38.12 62s12.55 35.89 37.94 61.43z"/><path class="cls-4" d="M140.68 112.83c0-22 9.81-58.58 24.92-93.15A113 113 0 00150.45 11c-16.54 37.27-26.78 76.91-26.78 101.87.0 24.15 11.09 64.23 27.93 101.7a113 113 0 0014.84-8.77c-15.59-35.07-25.76-71.73-25.76-92.97z"/><path class="cls-5" d="M80 112.83C80 87.74 69.35 47.88 53 11.07a112.76 112.76.0 00-14.93 8.64C53.21 54.26 63 90.85 63 112.83c0 21.23-10.17 57.88-25.76 92.91a113.66 113.66.0 0014.84 8.77C68.94 177.05 80 137 80 112.83z"/></g></g></svg></span><span class="text-uppercase font-weight-bold">Omni</span>
	</a>
	<div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
		<ul class="navbar-nav">
			
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="https://talos.dev" target="_blank" ><span>Talos Linux</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="https://github.com/siderolabs" target="_blank" ><span>GitHub</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="https://www.siderolabs.com" target="_blank" ><span>Sidero Labs</span></a>
			</li>
			
			
			<li class="nav-item dropdown mr-4 d-none d-lg-block">
				<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
	Releases
</a>
<div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
	
	<a class="dropdown-item" href="/v0.6">v0.6 (pre-release)</a>
	
	<a class="dropdown-item" href="/v0.5">v0.5 (latest)</a>
	
	<a class="dropdown-item" href="/v0.4">v0.4</a>
	
	<a class="dropdown-item" href="/v0.3">v0.3</a>
	
	<a class="dropdown-item" href="/v0.2">v0.2</a>
	
	<a class="dropdown-item" href="/v0.1">v0.1</a>
	
</div>

			</li>
			
			
      <li id="algolia-search"></li>
		</ul>
	</div>
	<div class="navbar-nav d-none d-lg-block"></div>
</nav>

    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            




<div class="td-content">
<div class="pageinfo pageinfo-primary d-print-none">
<p>
This is the multi-page printable view of this section.
<a href="#" onclick="print();return false;">Click here to print</a>.
</p><p>
<a href="/v0.1/overview/">Return to the regular view of this page</a>.
</p>
</div>



<h1 class="title">Overview</h1>





    <ul>
    
  
  
  
  

  
    
    
	
<li>1: <a href="#pg-34965319b8581f64d1e603d79f55d9f8">Introduction</a></li>


    
  
    
    
	
<li>2: <a href="#pg-39d8179add5cb7a873658a29f0339eff">Installation</a></li>


    
  
    
    
	
<li>3: <a href="#pg-78c0d9777831338f35f0d0d19760a088">Architecture</a></li>


    
  
    
    
	
<li>4: <a href="#pg-8bb0c6f3acf6237937511572849e6245">Resources</a></li>


    
  

    </ul>


<div class="content">
      
</div>
</div>


  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-34965319b8581f64d1e603d79f55d9f8">1 - Introduction</h1>
    
	<p>Sidero (&ldquo;Iron&rdquo; in Greek) is a project created by the <a href="https://www.talos-systems.com/">Talos Systems</a> team.
The goal of this project is to provide lightweight, composable tools that can be used to create bare-metal Talos + Kubernetes clusters.
These tools are built around the Cluster API project.
Sidero is also a subproject of Talos Systems&rsquo; <a href="https://github.com/talos-systems/arges">Arges</a> project, which will publish known-good versions of these components (along with others) with each release.</p>
<h2 id="overview">Overview</h2>
<p>Sidero is made currently made up of three components:</p>
<ul>
<li>Metal Metadata Server: Provides a Cluster API (CAPI)-aware metadata server</li>
<li>Metal Controller Manager: Provides custom resources and controllers for managing the lifecycle of metal machines</li>
<li>Cluster API Provider Sidero (CAPS): A Cluster API infrastructure provider that makes use of the pieces above to spin up Kubernetes clusters</li>
</ul>
<p>Sidero also needs these co-requisites in order to be useful:</p>
<ul>
<li><a href="https://github.com/kubernetes-sigs/cluster-api">Cluster API</a></li>
<li><a href="https://github.com/talos-systems/cluster-api-control-plane-provider-talos">Cluster API Control Plane Provider Talos</a></li>
<li><a href="https://github.com/talos-systems/cluster-api-bootstrap-provider-talos">Cluster API Bootstrap Provider Talos</a></li>
</ul>
<p>All componenets mentioned above can be installed using Cluster API&rsquo;s <code>clusterctl</code> tool.</p>
<p>Because of the design of Cluster API, there is inherently a &ldquo;chicken and egg&rdquo; problem with needing an existing Kubernetes cluster in order to provision the management plane.
Talos Systems and the Cluster API community have created tools to help make this transition easier.
That being said, the management plane cluster does not have to be based on Talos.
If you would, however, like to use Talos as the OS of choice for the Sidero management plane, you can find a number of ways to deploy Talos in the <a href="https://www.talos.dev">documentation</a>.</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-39d8179add5cb7a873658a29f0339eff">2 - Installation</h1>
    
	<p>As of Cluster API version 0.3.9, Sidero is included as a default infrastructure provider in clusterctl.</p>
<p>To install Sidero and the other Talos providers, simply issue:</p>
<div class="highlight"><pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>clusterctl init -b talos -c talos -i sidero
</span></span></code></pre></div>
</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-78c0d9777831338f35f0d0d19760a088">3 - Architecture</h1>
    
	<p>The overarching architecture of Sidero centers around a &ldquo;management plane&rdquo;.
This plane is expected to serve as a single interface upon which administrators can create, scale, upgrade, and delete Kubernetes clusters.
At a high level view, the management plane + created clusters should look something like:</p>
<p><img src="./images/dc-view.png" alt="Alternative text"></p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-8bb0c6f3acf6237937511572849e6245">4 - Resources</h1>
    
	<p>Sidero, the Talos bootstrap/controlplane providers, and Cluster API each provide several custom resources (CRDs) to Kubernetes.
These CRDs are crucial to understanding the connections between each provider and in troubleshooting problems.
It may also help to look at the <a href="https://github.com/talos-systems/sidero/blob/master/templates/cluster-template.yaml">cluster template</a> to get an idea of the relationships between these.</p>
<hr>
<h2 id="cluster-api-capi">Cluster API (CAPI)</h2>
<p>It&rsquo;s worth defining the most basic resources that CAPI provides first, as they are related to several subsequent resources below.</p>
<h3 id="cluster"><code>Cluster</code></h3>
<p><code>Cluster</code> is the highest level CAPI resource.
It allows users to specify things like network layout of the cluster, as well as contains references to the infrastructure and control plane resources that will be used to create the cluster.</p>
<h3 id="machines"><code>Machines</code></h3>
<p><code>Machine</code> represents an infrastructure component hosting a Kubernetes node.
Allows for specification of things like Kubernetes version, as well as contains reference to the infrastructure resource that relates to this machine.</p>
<h3 id="machinedeployments"><code>MachineDeployments</code></h3>
<p><code>MachineDeployments</code> are similar to a <code>Deployment</code> and their relationship to <code>Pods</code> in Kubernetes primitives.
A <code>MachineDeployment</code> allows for specification of a number of Machine replicas with a given specification.</p>
<hr>
<h2 id="cluster-api-bootstrap-provider-talos-cabpt">Cluster API Bootstrap Provider Talos (CABPT)</h2>
<h3 id="talosconfigs"><code>TalosConfigs</code></h3>
<p>The <code>TalosConfig</code> resource allows a user to specify the type (init, controlplane, join) for a given machine.
The bootstrap provider will then generate a Talos machine configuration for that machine.
This resource also provides the ability to pass a full, pre-generated machine configuration.
Finally, users have the ability to pass <code>configPatches</code>, which are applied to edit a generate machine configuration with user-defined settings.
The <code>TalosConfig</code> corresponds to the <code>bootstrap</code> sections of Machines, <code>MachineDeployments</code>, and the <code>controlPlaneConfig</code> section of <code>TalosControlPlanes</code>.</p>
<h3 id="talosconfigtemplates"><code>TalosConfigTemplates</code></h3>
<p><code>TalosConfigTemplates</code> are similar to the <code>TalosConfig</code> above, but used when specifying a bootstrap reference in a <code>MachineDeployment</code>.</p>
<hr>
<h2 id="cluster-api-control-plane-provider-talos-cacppt">Cluster API Control Plane Provider Talos (CACPPT)</h2>
<h3 id="taloscontrolplanes"><code>TalosControlPlanes</code></h3>
<p>The control plane provider presents a single CRD, the <code>TalosControlPlane</code>.
This resource is similar to <code>MachineDeployments</code>, but is targeted exclusively for the Kubernetes control plane nodes.
The <code>TalosControlPlane</code> allows for specification of the number of replicas, version of Kubernetes for the control plane nodes, references to the infrastructure resource to use (<code>infrastructureTemplate</code> section), as well as the configuration of the bootstrap data via the <code>controlPlaneConfig</code> section.
This resource is referred to by the CAPI Cluster resource via the <code>controlPlaneRef</code> section.</p>
<hr>
<h2 id="sidero">Sidero</h2>
<h3 id="cluster-api-provider-sidero-caps">Cluster API Provider Sidero (CAPS)</h3>
<h4 id="metalclusters"><code>MetalClusters</code></h4>
<p>A <code>MetalCluster</code> is Sidero&rsquo;s view of the cluster resource.
This resource allows users to define the control plane endpoint that corresponds to the Kubernetes API server.
This resource corresponds to the <code>infrastructureRef</code> section of Cluster API&rsquo;s <code>Cluster</code> resource.</p>
<h4 id="metalmachines"><code>MetalMachines</code></h4>
<p>A <code>MetalMachine</code> is Sidero&rsquo;s view of a machine.
Allows for reference of a single server or a server class from which a physical server will be picked to bootstrap.</p>
<h4 id="metalmachinetemplates"><code>MetalMachineTemplates</code></h4>
<p>A <code>MetalMachineTemplate</code> is similar to a <code>MetalMachine</code> above, but serves as a template that is reused for resources like <code>MachineDeployments</code> or <code>TalosControlPlanes</code> that allocate multiple <code>Machines</code> at once.</p>
<h4 id="serverbindings"><code>ServerBindings</code></h4>
<p><code>ServerBindings</code> represent a one-to-one mapping between a Server resource and a <code>MetalMachine</code> resource.
A <code>ServerBinding</code> is used internally to keep track of servers that are allocated to a Kubernetes cluster and used to make decisions on cleaning and returning servers to a <code>ServerClass</code> upon deallocation.</p>
<h3 id="metal-controller-manager">Metal Controller Manager</h3>
<h4 id="environments"><code>Environments</code></h4>
<p>These define a desired deployment environment for Talos, including things like which kernel to use, kernel args to pass, and the initrd to use.
Sidero allows you to define a default environment, as well as other environments that may be specific to a subset of nodes.
Users can override the environment at the <code>ServerClass</code> or <code>Server</code> level, if you have requirements for different kernels or kernel parameters.</p>
<p>See the <a href="/docs/v0.1/configuration/environments/">Environments</a> section of our Configuration docs for examples and more detail.</p>
<h4 id="servers"><code>Servers</code></h4>
<p>These represent physical machines as resources in the management plane.
These <code>Servers</code> are created when the physical machine PXE boots and completes a &ldquo;discovery&rdquo; process in which it registers with the management plane and provides SMBIOS information such as the CPU manufacturer and version, and memory information.</p>
<p>See the <a href="/docs/v0.1/configuration/servers/">Servers</a> section of our Configuration docs for examples and more detail.</p>
<h4 id="serverclasses"><code>ServerClasses</code></h4>
<p><code>ServerClasses</code> are a grouping of the <code>Servers</code> mentioned above, grouped to create classes of servers based on Memory, CPU or other attributes.
These can be used to compose a bank of <code>Servers</code> that are eligible for provisioning.</p>
<p>See the <a href="/docs/v0.1/configuration/serverclasses/">ServerClasses</a> section of our Configuration docs for examples and more detail.</p>
<h3 id="metal-metadata-server">Metal Metadata Server</h3>
<p>While the metadata server does not present unique CRDs within Kubernetes, it&rsquo;s important to understand the metadata resources that are returned to physical servers during the boot process.</p>
<h4 id="metadata">Metadata</h4>
<p>The metadata server may be familiar to you if you have used cloud environments previously.
Using Talos machine configurations created by the Talos Cluster API bootstrap provider, along with patches specified by editing <code>Server</code>/<code>ServerClass</code> resources or <code>TalosConfig</code>/<code>TalosControlPlane</code> resources, metadata is returned to servers who query the metadata server at boot time.</p>
<p>See the <a href="/docs/v0.1/configuration/metadata/">Metadata</a> section of our Configuration docs for examples and more detail.</p>

</div>



    
	
  



          </main>
        </div>
      </div>
      
<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
        
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Twitter" aria-label="Twitter">
    <a class="text-white" target="_blank" rel="noopener" href="https://twitter.com/SideroLabs" aria-label="Twitter">
      <i class="fab fa-twitter"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
    <a class="text-white" target="_blank" rel="noopener" href="https://github.com/siderolabs" aria-label="GitHub">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2022 Sidero Labs, Inc. All Rights Reserved</small>
        
	
		
	
      </div>
    </div>
  </div>
</footer>


    </div>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
    integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js"
    integrity="sha512-UR25UO94eTnCVwjbXozyeVd6ZqpaAE9naiEUBK/A+QDbfSTQFhPGj5lOR6d8tsgbBk84Ggb5A3EkjsOgPRPcKA=="
    crossorigin="anonymous"></script>





<script src='/js/tabpane-persist.js'></script>


















<script src="/js/main.min.68e31ec429bf4c76d0cfc803a06912682cfe4274c4cafeb4d70d00cfe3c3b618.js" integrity="sha256-aOMexCm/THbQz8gDoGkSaCz&#43;QnTEyv601w0Az&#43;PDthg=" crossorigin="anonymous"></script>








<script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script>



<script>
  docsearch({
    appId: "0UBMNL8U2A",
    apiKey: "b23cc1d9c0b406b2d1b83f0c652ead8a",
    indexName: "sidero",
    container: '#algolia-search',
    debug: true,
    searchParameters: {
      facetFilters: ['version:v0.1'],
    },
  });
</script>






<meta name="docsearch:version" content="v0.1" />




  </body>
</html>
